{"title":"InfluxDB1.0的入门","uid":"84a50db5bf041e6e7c87814a2cdda6c0","slug":"InfluxDB的入门","date":"2022-09-11T15:30:06.000Z","updated":"2025-03-11T03:18:34.310Z","comments":true,"path":"api/articles/InfluxDB的入门.json","keywords":null,"cover":null,"content":"<h2 id=\"下载安装InfluxDB\"><a href=\"#下载安装InfluxDB\" class=\"headerlink\" title=\"下载安装InfluxDB\"></a>下载安装InfluxDB</h2><p>下载地址：<a href=\"https://dl.influxdata.com/influxdb/releases/influxdb-1.5.4_windows_amd64.zip\">https://dl.influxdata.com/influxdb/releases/influxdb-1.5.4_windows_amd64.zip</a></p>\n<p>下载完成后修改influxdb.conf信息</p>\n<ol>\n<li>将<code>[meta]</code>里的<code>dir</code>修改为自己的地址</li>\n<li>将<code>[data]</code>里的<code>dir</code>修改为自己的地址</li>\n</ol>\n<h2 id=\"运行InfluxDB服务\"><a href=\"#运行InfluxDB服务\" class=\"headerlink\" title=\"运行InfluxDB服务\"></a>运行InfluxDB服务</h2><p>通过<code>CMD</code>导航到所在文件夹，并执行命令启动服务</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; E:</span><br><span class=\"line\">&gt; CD E:\\influxdb\\influxdb1<span class=\"number\">.5</span><span class=\"number\">.4</span>\\influxdb-<span class=\"number\">1.5</span><span class=\"number\">.4</span>-<span class=\"number\">1</span></span><br><span class=\"line\">&gt; influxd.exe -config influxdb.conf</span><br></pre></td></tr></table></figure>\n\n<p>再打开一个<code>CMD</code>，并执行<code>influx</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; E:</span><br><span class=\"line\">&gt; CD E:\\influxdb\\influxdb1<span class=\"number\">.5</span><span class=\"number\">.4</span>\\influxdb-<span class=\"number\">1.5</span><span class=\"number\">.4</span>-<span class=\"number\">1</span></span><br><span class=\"line\">&gt; influx</span><br><span class=\"line\"># 如果配置了自定义的端口号，使用</span><br><span class=\"line\">&gt; influx -port 端口号</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载安装可视化软件\"><a href=\"#下载安装可视化软件\" class=\"headerlink\" title=\"下载安装可视化软件\"></a>下载安装可视化软件</h3><p>下载地址：<a href=\"https://github.com/CymaticLabs/InfluxDBStudio/releases/tag/v0.2.0-beta.1\">https://github.com/CymaticLabs/InfluxDBStudio/releases/tag/v0.2.0-beta.1</a></p>\n<h3 id=\"启动软件\"><a href=\"#启动软件\" class=\"headerlink\" title=\"启动软件\"></a>启动软件</h3><p>找到<code>InfluxDBStudio.exe</code>并双击</p>\n<h2 id=\"常用SQL命令\"><a href=\"#常用SQL命令\" class=\"headerlink\" title=\"常用SQL命令\"></a>常用SQL命令</h2><ul>\n<li>创建数据库</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 命令格式 create database &quot;db_name&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE NOAA_water_database;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>显示数据库</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> databases;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>删除数据库</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 命令格式 drop database &quot;db_name&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> DATABASE NOAA_water_database; </span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>使用数据库</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 命令格式 use &quot;db_name&quot;</span></span><br><span class=\"line\">use NOAA_water_database; </span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>显示该数据库中所有的表</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> measurements;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>创建表，直接在插入数据的时候指定表名</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 命令格式 insert test,host=127.0.0.1,monitor_name=test count=1</span></span><br><span class=\"line\">use NOAA_water_database; </span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>删除表</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 命令格式 drop measurement &quot;measurement_name&quot;</span></span><br><span class=\"line\">use NOAA_water_database; </span><br></pre></td></tr></table></figure>\n<h2 id=\"CRUD示例\"><a href=\"#CRUD示例\" class=\"headerlink\" title=\"CRUD示例\"></a>CRUD示例</h2><h3 id=\"测试数据导入\"><a href=\"#测试数据导入\" class=\"headerlink\" title=\"测试数据导入\"></a>测试数据导入</h3><p>通过CMD导航到，并执行下载命令再通过import进行导入 <em><strong>(如果使用默认端口号</strong></em> <code>-port 28086 </code> <em><strong>需删除)</strong></em></p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; E:</span><br><span class=\"line\">&gt; <span class=\"built_in\">CD</span> E:\\influxdb\\influxdb1.<span class=\"number\">5</span>.<span class=\"number\">4</span>\\influxdb-<span class=\"number\">1</span>.<span class=\"number\">5</span>.<span class=\"number\">4</span>-<span class=\"number\">1</span></span><br><span class=\"line\">&gt; curl https://s3.amazonaws.com/noaa.water-database/NOAA_data.txt -o NOAA_data.txt</span><br><span class=\"line\">&gt; influx -port <span class=\"number\">28086</span> -import -<span class=\"built_in\">path</span>=NOAA_data.txt -precision=s -database=NOAA_water_database</span><br></pre></td></tr></table></figure>\n<p>启动influx，并测试查询</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; SHOW measurements;</span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">name: <span class=\"title\">measurements</span></span></span><br><span class=\"line\"><span class=\"function\">------------------</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">name</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">average_temperature</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">h2o_feet</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">h2o_pH</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">h2o_quality</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">h2o_temperature</span></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查询数据\"><a href=\"#查询数据\" class=\"headerlink\" title=\"查询数据\"></a>查询数据</h3><p>计算<em><strong>water_level</strong></em>的非空值的数量<em><strong>h2o_feet</strong></em></p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; SELECT COUNT(&quot;water_level&quot;) FROM h2o_feet</span><br><span class=\"line\"><span class=\"function\">name: <span class=\"title\">h2o_feet</span></span></span><br><span class=\"line\"><span class=\"function\">--------------</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">time</span>\t\t\t         <span class=\"title\">count</span></span></span><br><span class=\"line\"><span class=\"function\">1970-01-01<span class=\"title\">T00</span>:00:00<span class=\"title\">Z</span>\t 15258</span></span><br></pre></td></tr></table></figure>\n<p>选择测量<code>h2o_feet</code>中的前五个观测值：</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; SELECT * FROM h2o_feet LIMIT <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"function\">name: <span class=\"title\">h2o_feet</span></span></span><br><span class=\"line\"><span class=\"function\">--------------</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">time</span>\t\t\t           <span class=\"title\">level</span> <span class=\"title\">description</span>\t   <span class=\"title\">location</span>\t       <span class=\"title\">water_level</span></span></span><br><span class=\"line\"><span class=\"function\">2015-08-18<span class=\"title\">T00</span>:00:00<span class=\"title\">Z</span>\t   <span class=\"title\">below</span> 3 <span class=\"title\">feet</span>\t\t       <span class=\"title\">santa_monica</span>\t   2.064</span></span><br><span class=\"line\"><span class=\"function\">2015-08-18<span class=\"title\">T00</span>:00:00<span class=\"title\">Z</span>\t   <span class=\"title\">between</span> 6 <span class=\"title\">and</span> 9 <span class=\"title\">feet</span>\t   <span class=\"title\">coyote_creek</span>\t   8.12</span></span><br><span class=\"line\"><span class=\"function\">2015-08-18<span class=\"title\">T00</span>:06:00<span class=\"title\">Z</span>\t   <span class=\"title\">between</span> 6 <span class=\"title\">and</span> 9 <span class=\"title\">feet</span>\t   <span class=\"title\">coyote_creek</span>\t   8.005</span></span><br><span class=\"line\"><span class=\"function\">2015-08-18<span class=\"title\">T00</span>:06:00<span class=\"title\">Z</span>\t   <span class=\"title\">below</span> 3 <span class=\"title\">feet</span>\t\t       <span class=\"title\">santa_monica</span>\t   2.116</span></span><br><span class=\"line\"><span class=\"function\">2015-08-18<span class=\"title\">T00</span>:12:00<span class=\"title\">Z</span>\t   <span class=\"title\">between</span> 6 <span class=\"title\">and</span> 9 <span class=\"title\">feet</span>\t   <span class=\"title\">coyote_creek</span>\t   7.887</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"删除数据\"><a href=\"#删除数据\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; delete FROM &quot;h2o_feet&quot; where &quot;<span class=\"built_in\">time</span>&quot; = &#x27;<span class=\"number\">2019</span>-<span class=\"number\">08</span>-<span class=\"number\">17</span>T00:<span class=\"number\">00</span>:<span class=\"number\">00</span>Z&#x27;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"增加数据\"><a href=\"#增加数据\" class=\"headerlink\" title=\"增加数据\"></a>增加数据</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 通过\\ 解决KEY值分开的问题</span><br><span class=\"line\">&gt; insert h2o_feet,location=coyote_creek water_level=<span class=\"number\">10</span>.<span class=\"number\">99</span>,level\\ description=&quot;below <span class=\"number\">3</span> feet&quot; <span class=\"number\">1662692351221478600</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改数据\"><a href=\"#修改数据\" class=\"headerlink\" title=\"修改数据\"></a>修改数据</h3><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 时间戳与tag必须与修改数据一致</span><br><span class=\"line\">&gt; insert h2o_feet,location=coyote_creek water_level=<span class=\"number\">10</span>.<span class=\"number\">98</span>,level\\ description=&quot;below <span class=\"number\">3</span> feet&quot; <span class=\"number\">1662692351221478600</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"数据来源和注意事项\"><a href=\"#数据来源和注意事项\" class=\"headerlink\" title=\"数据来源和注意事项\"></a>数据来源和注意事项</h3><p>样本数据是来自美国<strong>国家海洋和大气管理局 (NOAA) 业务海洋产品和服务中心</strong>的公开数据。这些数据包括 2015 年 8 月 18 日至 2015 年 9 月 18 日期间在两个站点（加利福尼亚州圣莫尼卡 (ID 9410840) 和加利福尼亚州 Coyote Creek (ID 9414575)）每六分钟收集的 15,258 次水位 (ft) 观测值.</p>\n<p>请注意，测量值<code>average_temperature、h2o_pH、h2o_quality和h2o_temperature</code>包含虚构数据。这些测量有助于阐明<code>Schema Exploration</code>中的查询功能。</p>\n<p>该<code>h2o_feet</code>测量是唯一包含<code>NOAA</code>数据的测量。请注意，该<code>level description</code>字段不是原始<code>NOAA</code>数据的一部分 - 我们将其隐藏在其中是为了获得具有特殊字符和字符串<code>字段值</code>的字段键。</p>\n<h2 id=\"InfluxDB在Java中的使用\"><a href=\"#InfluxDB在Java中的使用\" class=\"headerlink\" title=\"InfluxDB在Java中的使用\"></a>InfluxDB在Java中的使用</h2><h3 id=\"引入Maven依赖\"><a href=\"#引入Maven依赖\" class=\"headerlink\" title=\"引入Maven依赖\"></a>引入Maven依赖</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.influxdb<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>influxdb-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.18<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"客户端连接\"><a href=\"#客户端连接\" class=\"headerlink\" title=\"客户端连接\"></a>客户端连接</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 数据库连接地址</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">serverURL</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;http://localhost:28086&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 账号名</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;admin&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 密码</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">password</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;123456&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 数据库名称</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"type\">String</span> <span class=\"variable\">databaseName</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;NOAA_water_database&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建连接</span></span><br><span class=\"line\"><span class=\"type\">InfluxDB</span> <span class=\"variable\">influxDB</span> <span class=\"operator\">=</span> InfluxDBFactory.connect(serverURL, username, password);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"新增数据\"><a href=\"#新增数据\" class=\"headerlink\" title=\"新增数据\"></a>新增数据</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 插入数据</span></span><br><span class=\"line\"><span class=\"type\">Point</span> <span class=\"variable\">build</span> <span class=\"operator\">=</span> Point.measurement(<span class=\"string\">&quot;h2o_feet&quot;</span>)</span><br><span class=\"line\">        .tag(<span class=\"string\">&quot;location&quot;</span>, <span class=\"string\">&quot;coyote_creek&quot;</span>)</span><br><span class=\"line\">        .addField(<span class=\"string\">&quot;water_level&quot;</span>, <span class=\"number\">10.9</span>)</span><br><span class=\"line\">        .addField(<span class=\"string\">&quot;level description&quot;</span>, <span class=\"string\">&quot;below 3 feet&quot;</span>).build();</span><br><span class=\"line\">influxDB.write(databaseName, <span class=\"string\">&quot;&quot;</span>, build);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除数据-1\"><a href=\"#删除数据-1\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 删除数据</span></span><br><span class=\"line\"><span class=\"type\">Query</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Query</span>(<span class=\"string\">&quot;delete FROM \\&quot;h2o_feet\\&quot; where \\&quot;time\\&quot; = &#x27;2019-08-17T00:00:00Z&#x27;&quot;</span>, databaseName);</span><br><span class=\"line\">influxDB.query(query, <span class=\"number\">0</span>, queryResult -&gt; &#123;</span><br><span class=\"line\">    System.out.println(queryResult.getResults());</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改数据-1\"><a href=\"#修改数据-1\" class=\"headerlink\" title=\"修改数据\"></a>修改数据</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">// 修改数据 时间戳与需修改数据的时间戳与tag必须一样 santa_monica</span></span><br><span class=\"line\"><span class=\"type\">Point</span> <span class=\"variable\">build</span> <span class=\"operator\">=</span> Point.measurement(<span class=\"string\">&quot;h2o_feet&quot;</span>)</span><br><span class=\"line\">        .tag(<span class=\"string\">&quot;location&quot;</span>, <span class=\"string\">&quot;coyote_creek&quot;</span>)</span><br><span class=\"line\">        .addField(<span class=\"string\">&quot;water_level&quot;</span>, <span class=\"number\">10.9</span>)</span><br><span class=\"line\">        .addField(<span class=\"string\">&quot;level description&quot;</span>, <span class=\"string\">&quot;below 3 feet&quot;</span>).build();</span><br><span class=\"line\">influxDB.write(databaseName, <span class=\"string\">&quot;&quot;</span>, build);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查询数据-1\"><a href=\"#查询数据-1\" class=\"headerlink\" title=\"查询数据\"></a>查询数据</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 删除数据</span></span><br><span class=\"line\"><span class=\"type\">Query</span> <span class=\"variable\">query</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Query</span>(<span class=\"string\">&quot;delete FROM \\&quot;h2o_feet\\&quot; where \\&quot;time\\&quot; = &#x27;2019-08-17T00:00:00Z&#x27;&quot;</span>, databaseName);</span><br><span class=\"line\">influxDB.query(query, <span class=\"number\">0</span>, queryResult -&gt; &#123;</span><br><span class=\"line\">    System.out.println(queryResult.getResults());</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"InfluxDB的关键概念\"><a href=\"#InfluxDB的关键概念\" class=\"headerlink\" title=\"InfluxDB的关键概念\"></a>InfluxDB的关键概念</h2><p><code>InfluxDB</code>专为时间序列数据而构建。关系数据库可以处理时间序列数据，但没有针对常见的时间序列工作负载进行优化。<code>InfluxDB</code>旨在存储大量时间序列数据并快速对该数据执行实时分析。</p>\n<h3 id=\"time就是主键\"><a href=\"#time就是主键\" class=\"headerlink\" title=\"time就是主键\"></a>time就是主键</h3><p>在<code>InfluxDB</code>中，时间戳标识就是主键。这就像一个<code>SQL</code>数据库表，其中主键是系统预先设置的，并且始终是时间戳。</p>\n<h3 id=\"关键词汇\"><a href=\"#关键词汇\" class=\"headerlink\" title=\"关键词汇\"></a>关键词汇</h3><ul>\n<li><strong>database</strong> 同MySQL都代表数据库</li>\n<li><strong>measurement</strong> 同MySQL中的表</li>\n<li><strong>point</strong> 同MySQL中的一行数据</li>\n<li><strong>time</strong> 数据库记录的时间是主键，自动生成</li>\n<li><strong>field</strong> 可以理解为MySQL中非索引column</li>\n<li><strong>tag</strong> 可以理解为MySQL中索引column</li>\n<li><strong>series</strong> measurement相同、field的key相同、tag的key、value相同的数据集</li>\n</ul>\n<h3 id=\"InfluxDB不是CRUD\"><a href=\"#InfluxDB不是CRUD\" class=\"headerlink\" title=\"InfluxDB不是CRUD\"></a>InfluxDB不是CRUD</h3><p><code>InfluxDB</code>是一个针对时间序列数据进行了优化的数据库。这些数据通常来自分布式传感器组、大型网站的点击数据或金融交易列表等来源。<br>这些数据的一个共同点是它在聚合中更有用。一篇文章说您的计算机的<code>CPU</code>在星期二 12:38:35 UTC 的利用率为 12%，很难从中得出结论。当与该系列的其余部分结合并可视化时，它会变得更加有用。这是随着时间的推移开始显示趋势的地方，并且可以从数据中得出可行的见解。另外，时序数据一般只写一次，很少更新。<br>结果是<code>InfluxDB</code>不是一个完整的<code>CRUD</code>数据库，而是更像一个<code>CR-ud</code>，将创建和读取数据的性能优先于更新和销毁，并防止一些更新和销毁行为以使创建和读取性能更高：</p>\n<ul>\n<li>要更新一个点，请插入一个具有相同<code>measurement、tag</code>和<code>time</code>he的点。</li>\n<li>您可以删除或删除一个系列，但不能基于字段值删除单个点。作为一种解决方法，您可以搜索字段值，检索时间，然后<em><strong>根据time字段删除</strong></em>。</li>\n<li>您还不能更新或重命名标签 - 请参阅 GitHub 问题<a href=\"https://github.com/influxdata/influxdb/issues/4157\">#4157</a>了解更多信息。要修改一系列点的标记，请找到具有违规标记值的点，将值更改为所需的值，将点写回，然后删除具有旧标记值的系列。</li>\n<li>您不能按tag删除tags -请参阅 GitHub 问题 <a href=\"https://github.com/influxdata/influxdb/issues/8604\">#8604</a>。</li>\n</ul>\n<h3 id=\"设计表上的注意点\"><a href=\"#设计表上的注意点\" class=\"headerlink\" title=\"设计表上的注意点\"></a>设计表上的注意点</h3><ol>\n<li>将查询、分组中常用的值作为tag字段，其它不常用的使用field字段</li>\n<li>不要创建过多的tag字段，这意味着按标签查询比按字段查询更高效。但是当创建的索引过多时，写入和读取都可能开始变慢。</li>\n<li>使用推荐的命名约定<ul>\n<li>避免在标签和字段键中保留关键字</li>\n<li>避免标签和字段使用相同的名称</li>\n<li>避免在测量和键中编码数据</li>\n</ul>\n</li>\n</ol>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>详细文档可查看官方文档 <a href=\"https://docs.influxdata.com/influxdb/v1.8/concepts/schema_and_data_layout/#avoid-reserved-keywords-in-tag-and-field-keys\">https://docs.influxdata.com/influxdb/v1.8/concepts/schema_and_data_layout&#x2F;#avoid-reserved-keywords-in-tag-and-field-keys</a><br>关于InfluxDB设计上的见解和权衡可参考官方文档<a href=\"https://docs.influxdata.com/influxdb/v1.8/concepts/insights_tradeoffs/\">https://docs.influxdata.com/influxdb/v1.8/concepts/insights_tradeoffs&#x2F;</a></p></blockquote>\n","text":"下载安装InfluxDB下载地址：https://dl.influxdata.com/influxdb/releases/influxdb-1.5.4_wind...","permalink":"/post/InfluxDB的入门","photos":[],"count_time":{"symbolsCount":"6.1k","symbolsTime":"6 mins."},"categories":[{"name":"InfluxDB","slug":"InfluxDB","count":1,"path":"api/categories/InfluxDB.json"}],"tags":[{"name":"InfluxDB","slug":"InfluxDB","count":1,"path":"api/tags/InfluxDB.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85InfluxDB\"><span class=\"toc-text\">下载安装InfluxDB</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%90%E8%A1%8CInfluxDB%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">运行InfluxDB服务</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8F%AF%E8%A7%86%E5%8C%96%E8%BD%AF%E4%BB%B6\"><span class=\"toc-text\">下载安装可视化软件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8%E8%BD%AF%E4%BB%B6\"><span class=\"toc-text\">启动软件</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E7%94%A8SQL%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">常用SQL命令</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#CRUD%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">CRUD示例</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5\"><span class=\"toc-text\">测试数据导入</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">查询数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">删除数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A2%9E%E5%8A%A0%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">增加数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">修改数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E6%9D%A5%E6%BA%90%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\"><span class=\"toc-text\">数据来源和注意事项</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#InfluxDB%E5%9C%A8Java%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">InfluxDB在Java中的使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%95%E5%85%A5Maven%E4%BE%9D%E8%B5%96\"><span class=\"toc-text\">引入Maven依赖</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">客户端连接</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">新增数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE-1\"><span class=\"toc-text\">删除数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE-1\"><span class=\"toc-text\">修改数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE-1\"><span class=\"toc-text\">查询数据</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#InfluxDB%E7%9A%84%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">InfluxDB的关键概念</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#time%E5%B0%B1%E6%98%AF%E4%B8%BB%E9%94%AE\"><span class=\"toc-text\">time就是主键</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%94%AE%E8%AF%8D%E6%B1%87\"><span class=\"toc-text\">关键词汇</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#InfluxDB%E4%B8%8D%E6%98%AFCRUD\"><span class=\"toc-text\">InfluxDB不是CRUD</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E8%AE%A1%E8%A1%A8%E4%B8%8A%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9\"><span class=\"toc-text\">设计表上的注意点</span></a></li></ol></li></ol>","author":{"name":"如峰","slug":"blog-author","avatar":"/logo/logo.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"分布式锁的使用","uid":"eb06ef93065c8037d3e339961454164b","slug":"分布式锁的使用","date":"2022-10-11T15:30:06.000Z","updated":"2025-03-11T03:18:45.282Z","comments":true,"path":"api/articles/分布式锁的使用.json","keywords":null,"cover":null,"text":"引言分布式锁的作用就是在分布式系统中解决多个机器之间共享资源的排他性。而只要能够解决锁的排他性、可重入性、锁的获取与释放的方法、锁的失效机制及避免死锁。则就可以...","permalink":"/post/分布式锁的使用","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"分布式","slug":"分布式","count":1,"path":"api/categories/分布式.json"}],"tags":[{"name":"分布式","slug":"分布式","count":1,"path":"api/tags/分布式.json"}],"author":{"name":"如峰","slug":"blog-author","avatar":"/logo/logo.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"java开发手册一面向对象","uid":"d1bd2738cb3df5b91e8dbed191b9a6e0","slug":"Java开发手册—面向对象","date":"2022-07-18T15:30:06.000Z","updated":"2025-03-11T03:18:36.913Z","comments":true,"path":"api/articles/Java开发手册—面向对象.json","keywords":null,"cover":"/logo/27524ac7880511ebb6edd017c2d2eca2.jpg","text":"声明此文章根据书籍《码出高效：Java开发手册》整理的读后笔记。仅交流学习使用。 引言面向对象编程(ec -Ori te Programming, OOP)是划...","permalink":"/post/Java开发手册—面向对象","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"面向对象","slug":"面向对象","count":1,"path":"api/categories/面向对象.json"}],"tags":[{"name":"Java","slug":"Java","count":1,"path":"api/tags/Java.json"}],"author":{"name":"如峰","slug":"blog-author","avatar":"/logo/logo.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}