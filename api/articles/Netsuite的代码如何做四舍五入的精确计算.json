{"title":"Netsuite的代码如何做四舍五入的精确计算","uid":"f477995566c168ad09c720d022e2a50c","slug":"Netsuite的代码如何做四舍五入的精确计算","date":"2025-03-11T10:07:36.000Z","updated":"2025-03-11T10:30:44.335Z","comments":true,"path":"api/articles/Netsuite的代码如何做四舍五入的精确计算.json","keywords":null,"cover":[],"content":"<h2 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h2><p>一般我们会用 <code>toFixed</code>做数值的四舍五入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var num = 5.56789;</span><br><span class=\"line\">var n=num.toFixed(2);// 5.57</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>toFixed()</code> 方法将一个浮点数转换为指定小数位数的字符串表示，如果小数位数高于数字，则使用 0 来填充。</li>\n<li><code>toFixed()</code> 方法可把 <code>Number</code> 四舍五入为指定小数位数的数字。</li>\n</ul>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">注意</p>\n<p><p><code>toFixed()</code> 方法在进行四舍五入时可能会产生一些不准确的结果，这是因为 <code>toFixed()</code> 方法在处理浮点数时，实际上使用的是舍入到最近的偶数（银行家舍入）策略，而不是标准的四舍五入。这种舍入策略是为了在大量运算时减小累积误差。</p>\n</p>\n</div>\n<p><strong>那我们如何处理数值的运算?</strong></p>\n<h2 id=\"引入decimal-js\"><a href=\"#引入decimal-js\" class=\"headerlink\" title=\"引入decimal.js\"></a>引入decimal.js</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>从网址<a href=\"https://github.com/MikeMcl/decimal.js\">https://github.com/MikeMcl/decimal.js</a>将<code>decimal.js</code>文件下载下来并导入到，Netsuite的文件柜中。然后在代码里直接引用</p></blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @NApiVersion 2.1</span><br><span class=\"line\"> * @NScriptType Suitelet</span><br><span class=\"line\"> */</span><br><span class=\"line\">define([&#x27;../../common/decimal.js&#x27;],</span><br><span class=\"line\">    /**</span><br><span class=\"line\"> * @param&#123;search&#125; search</span><br><span class=\"line\"> */</span><br><span class=\"line\">    (Decimal) =&gt; &#123;</span><br><span class=\"line\">        /**</span><br><span class=\"line\">         * Defines the Suitelet script trigger point.</span><br><span class=\"line\">         * @param &#123;Object&#125; scriptContext</span><br><span class=\"line\">         * @param &#123;ServerRequest&#125; scriptContext.request - Incoming request</span><br><span class=\"line\">         * @param &#123;ServerResponse&#125; scriptContext.response - Suitelet response</span><br><span class=\"line\">         * @since 2015.2</span><br><span class=\"line\">         */</span><br><span class=\"line\">        const onRequest = (scriptContext) =&gt; &#123;</span><br><span class=\"line\">           var num = new Decimal(5.56789).toFixed(2); // 5.57</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return &#123;onRequest&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>这是他可以支持的方法<br><img src=\"/post/Netsuite%E7%9A%84%E4%BB%A3%E7%A0%81%E5%A6%82%E4%BD%95%E5%81%9A%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5%E7%9A%84%E7%B2%BE%E7%A1%AE%E8%AE%A1%E7%AE%97/API.png\" alt=\"API.png\"></p>\n","text":"引言一般我们会用 toFixed做数值的四舍五入 12var num = 5.56789;var n=num.toFixed(2);// 5.57 toFixe...","permalink":"/post/Netsuite的代码如何做四舍五入的精确计算","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"Netsuite","slug":"Netsuite","count":2,"path":"api/categories/Netsuite.json"}],"tags":[{"name":"Netsuite","slug":"Netsuite","count":2,"path":"api/tags/Netsuite.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BC%95%E8%A8%80\"><span class=\"toc-text\">引言</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BC%95%E5%85%A5decimal-js\"><span class=\"toc-text\">引入decimal.js</span></a></li></ol>","author":{"name":"如峰","slug":"blog-author","avatar":"/logo/logo.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"如何获取Vendor Payment中的Credit Applied","uid":"f655d59ec657d9c4ac827ca1e1973708","slug":"如何获取Vendor Payment中的Credit Applied","date":"2025-03-11T15:30:06.000Z","updated":"2025-03-11T10:05:43.631Z","comments":true,"path":"api/articles/如何获取Vendor Payment中的Credit Applied.json","keywords":null,"cover":[],"text":"引言如何从脚本获取 Vendor Payment Record 中的 ‘Credit Applied’ 子列表数据 通过DOM的方式1234567jQuery....","permalink":"/post/如何获取Vendor Payment中的Credit Applied","photos":[],"count_time":{"symbolsCount":567,"symbolsTime":"1 mins."},"categories":[{"name":"Netsuite","slug":"Netsuite","count":2,"path":"api/categories/Netsuite.json"}],"tags":[{"name":"Netsuite","slug":"Netsuite","count":2,"path":"api/tags/Netsuite.json"}],"author":{"name":"如峰","slug":"blog-author","avatar":"/logo/logo.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"分布式锁的使用","uid":"eb06ef93065c8037d3e339961454164b","slug":"分布式锁的使用","date":"2022-10-11T15:30:06.000Z","updated":"2025-03-11T03:18:45.282Z","comments":true,"path":"api/articles/分布式锁的使用.json","keywords":null,"cover":null,"text":"引言分布式锁的作用就是在分布式系统中解决多个机器之间共享资源的排他性。而只要能够解决锁的排他性、可重入性、锁的获取与释放的方法、锁的失效机制及避免死锁。则就可以...","permalink":"/post/分布式锁的使用","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"分布式","slug":"分布式","count":1,"path":"api/categories/分布式.json"}],"tags":[{"name":"分布式","slug":"分布式","count":1,"path":"api/tags/分布式.json"}],"author":{"name":"如峰","slug":"blog-author","avatar":"/logo/logo.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}